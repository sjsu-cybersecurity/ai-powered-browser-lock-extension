# ML-based Authentication using Mouse Dynamics

## Overview
This repository includes scripts to conduct research regarding the ML-based authentication
using mouse dynamics. 

## Installation
The repository contains a submodule [Mouse-Dynamics-Challenge][submodule].
Make sure you include `--recurse-submodules` flag when running the `git clone` command to download the repository.
```bash
$ git clone --recurse-submodules https://github.com/sjsu-cybersecurity/ml-based-mouse-authentication.git
$ cd ai-powered-browser-lock-extension
$ npm install
```

## Research
### Mouse Authentication using CNN model
In this research, the CNN algorithm has been used to train an ML model.
To get the idea of the implementation, the idea from [Teng Hu's paper][1]
have been borrowed, such as creating input data, data augmentation,
and ML variable configs.

#### Scripts
##### 1. Convert CSV data to JPEG images
For the train/test data, [Mouse-Dynamics-Challenge][submodule] has been used.
However, the data format from the repo was CSV data. Hence, the CSV data has been
converted into JPEG image format so that the CNN can properly use the data.
To get the train/test data, 

```bash
npm run build:jpeg-images
```

In addition to that, `NUMBER_OF_OPERATIONS` can be used to set the number of mouse actions
per images. The default value is 100.

```bash
NUMBER_OF_OPERATIONS=500 npm run build:jpeg-images
```

The converted JPEG images will be saved in `./dist/training_files/jpeg`

##### 2. Augment data
The dataset provided from [Mouse-Dynamics-Challenge][submodule] is enough to train a model.
However, to improve the accuracy, dataset can be augmented. 

Basically, the script will randomly pick an image and rotate it by 90, 180, or 270 degrees.
The degree is also picked up randomly. Until the dateset size hits the target size, this operation
will keep running.

```bash
npm run build:augment-images
```

The target size can be determined by `NUMBER_OF_DATA`. This variable indicates the total number of test and train
data size. Hence, if you provide NUMBER_OF_DATA=10000, it means you will have 5000 train data and 5000 test data in the end.
The default data is 20000. And this step is optional, you can still train a model without this augmentation step.

```bash
NUMBER_OF_DATA=30000 npm run build:augment-images
```

##### 3. Train model
With this command, you can train a model with the JPEG images generated by the commands above.
Each model will determined if a user is legit ot not. Hence, you must specify the user that the model will be trained against.
The default user is `user7` and you can specify the user through `LEGAL_USER` flag.

```bash
LEGAL_USER=user7 npm run build:train 
```

Below is the list of users in the [Mouse-Dynamics-Challenge][submodule].

```js
const users = [
    'user7', 'user9', 'user12', 'user15', 'user16',
    'user20', 'user21', 'user23', 'user29', 'user35'
];
```

From Teng Hu's research paper, they composed the dataset in the following way:
1. The ratio between the size of training dataset and test data set is 85:15.
2. The number of data between legal and illegal users is the same.
    - If the number of legal user data is 500, the other 500 will be picked out of all other users.
   
By default, this ratio is ignored. However, if you want to run the model following the ratio,
`IGRNORE_RATIO` flag can be used.

```bash
IGNORE_RATIO=true npm run build:train-model
```

Also, if you augmented data with the command `npm run build:augment-images`, you need to
provide the same value for the `NUMBER_OF_DATA` flag. Otherwise, the dataset ratio can
be mismatched, and the train command will fail.

```bash
IGNORE_RATIO=true NUMBER_OF_DATA=30000 npm run build:train-model
```

##### 4. Clean up
If you want to re-run commands to re-create JPEG images or re-train model,
first run the cleanup command. It will clean up the data in `./dist/training_files/jpeg`.

```bash
npm run build:clean
```

[submodule]: https://github.com/balabit/Mouse-Dynamics-Challenge
[1]: https://www.hindawi.com/journals/scn/2019/3898951/
